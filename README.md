## API Приложение "Реферальный сервис"

API приложения реферального сервиса со следующим функционалом:
 - Регистрация и аутентификация пользователя (JWT, Oauth 2.0);
 - Аутентифицированный пользователь может создать или удалить свой реферальный код. 
 - Одновременно может быть активен только 1 реферальный код у реферала. 
 - Контроль за сроком действия реферальных кодов и их деактивация;
 - Возможность получения реферального кода по email адресу реферала;
 - Возможность регистрации по реферальному коду в качестве реферала;
 - Проверка на действующий email с помощью API Hunter.io;
 - Хеширование реферального кода с помощью in-memory БД;
 - Получение информации о рефералах по id реферера;
 - UI документация (Swagger/).

### Используемые зависимости:
* python = "^3.12"
* django = "^5.1.6"
* djangorestframework = "^3.15.2"
* psycopg2-binary = "^2.9.10"
* python-dotenv = "^1.0.1"
* djangorestframework-simplejwt = "^5.4.0"
* redis = "^5.2.1"
* django-celery-beat = "^2.7.0"
* drf-yasg = "^1.21.8"
* requests = "^2.32.3"
* celery = "^5.4.0"
* django-redis = "^5.4.0"


#### Для запуска приложения необходимо:

1) Склонировать из GitHub данный проект: `git clone https://github.com/GromovAS21/referrals_service.git`;
2) Перейти в папку с приложением установить все зависимостb `poetry install` и запустить виртуальное окружение `poetry shell`;
3) Переименовать файл [.env.sample](.env.sample) в [.env](.env.sample) и заполнить все данные в этом файле;
4) Зайти на сайт [HUNTER API](https://hunter.io/api-keys), получить личный **API Key** и внести его в файл [.env](.env.sample) в переменную `HUNTER_API_KEY`;
5) Если запускаете локально то необходимо выполнить последовательно следующие команды и проект зауститься по адресу [127.0.0.1:8000]():
    - `python3 manage.py makemigrations` - создаем миграции
    - `python3 manage.py migrate` - применяем миграции
    - `python3 manage.py csu` - Создание суперпользователя для БД
    - `python3 manage.py cu` - Создание пользователей для БД
    - `python3 manage.py crc` - Создание реферальных кодов для БД
    - `redis-server` - запускаем брокер redis
    - `celery -A config worker --beat --scheduler django --loglevel=info ` - запускаем celery worker и celery-beat
    - `python3 manage.py runserver` - запускаем семрвер
6) Если хотите запустить с использованием контейнеров, то запустите Docker 
7) Запустить программу командами `docker-compose up -d --build `. Приложение запуститься по адресу [0.0.0.0:8000]();



### Имеющаяся валидация данных:

   При создании пользователя:
   - Проверка на корректный и существующий email
   - Проверка на длину пароля не менее 8 символов
   - Проверка на действующий реферальный код который указан при регистрации
   
   При создании реферального кода:
   - Проверка на длину реферального кода и отсутствие букв (6 цифр)
   - Проверка на указание срока реферального кода
   - Проверка даты, она не должна быть указана в прошедшем

   При удалении реферального кода:
   - Проверка является ли текущий пользователь владельцем реферального кода

## API документация находится по эндпоинту `swagger/`

#### **Приятного использования!**

****"Чтобы понять код мида, нужно быть мидом. Чтобы понять код сеньора, достаточно быть джуном" - Гейб Логан Ньюэлл****


